# 全文検索エンジンgroongaを囲む夕べ 3 原稿 「rroongaを使ったソースコード検索エンジン Milkode」

## ページ1: タイトルロゴ

## ページ2: rroongaを使ったソースコード検索エンジン Milkode
こんにちはongaeshiと申します。今日はrroongaをどのようにMilkodeで利用しているかについて発表させて頂きます。

## ページ3: 自己紹介
最初に自己紹介をさせて下さい。

## ページ4: 自己紹介
ongaeshiといいます。プログラマを生業にしており趣味でソフトウェアを作って公開してます

## ページ5: 今日の予定
アジェンダです。

## ページ6: 今日の予定
最初にMilkodeというソフトウェアの紹介をしてから、rroongaをどこで使っているか説明します。その後でいくつか実装の解説をしていければ、と思っています。

## ページ7: Milkodeについて
それでは始めにMilkodeの紹介からです。

## ページ8: Milkodeって何？
Milkodeはソースコード検索に特化した検索エンジンです。

- ローカルやWeb上にあるソースコードを登録して高速に検索することが出来ます。

## ページ9: Milkodeの特徴
特徴です。

*** [ENTER] 高速 ***
まずはその高速性です。 20000ファイル位であれば1秒以内に検索することが出来ます。

*** [ENTER] 行指向 ***
Milkodeは行指向の検索エンジンです。一般的に検索エンジンは「特定の単語を含むファイル」を見つけますが、Milkodeは「特定の単語を含む行」を見つけます。 

*** [ENTER] エディタでもブラウザでも ***
webアプリとコマンドラインツールを状況に応じて使い分けることが出来ます。

## ページ10: 使ったライブラリなど
Milkodeはrroongaをはじめとしたたくさんのgemを使って出来ています。

## ページ11: デモ
それでは実際に動いている所をご紹介したいと思います。

● フルスクリーン解除(Cmd+Shift+F) -> milk web画面を開く -> 再度フルスクリーン
milk web コマンドでアプリを起動するとこのような画面が表示されます。

現在はruby, mruby, node.js, rails 等のソースコードが登録されており、全部で13207ファイルあります。
では試しに mrubyの String#split の実装を検索してみましょう。

まずはmrubyパッケージに移動します。
● mrubyに移動

AND検索を使ってエントリポイントを探します、 rb_deine_method split .. はい出て来ました。10000程度のファイルであればこれ位のスピード感で検索することが出来ます。
● [ENTER] rb_define_method split

試しにrubyで同じキーワードで検索すると..、String以外にPathnameやBigdecimalにもsplitメソッドがあることが分かります。
● パッケージrubyに切り替え

mruby に戻りましょう。mrb_str_split_m で検索して関数の実体を探します。無事に見つけることが出来ました。
● パッケージmrubyに切り替え

mrb_str_split_m 関数の実体を探します。見つかりました。このように使い慣れたブラウザを使って目的の関数を簡単に見つけることが出来ました。
● [ENTER] mrb_str_split_m

またgmilkというコマンドラインツールを使うことで、今ブラウザで開いている箇所を使い慣れたエディタで開くことも可能です。
●行番号をクリック、テキストファイルに貼付け
●gmilk eeeee、エディタでファイルにジャンプ

Milkodeを使うとこのように快適にコードリーディングを進めることが出来ます。

## ページ13: rroongaの使い方
それでは次にMilkodeでのrroongaの使い方についてです。

## ページ14: 使用箇所
追加予定

## ページ14: 何故rroongaを使ったの?

## ページ15: 何故rroongaを使ったの?(2)

## ページ16: 実装の解説

## ページ17: スキーマ

## ページ18: どうよって行を絞り込むの？

## ページ19: Tips

## ページ20: ありがとうございました
Milkodeはまだまだ発展途中のソフトウェアのため、皆さんに使って頂きフィードバックがもらえればと思っています。
何か気になることがありましたらTwitterやメール、この後の懇親会等で教えて頂ければ幸いです。

このプレゼンで興味を持ちましたら是非一度Milkodeを使ってみてください。

どうもありがとうございました。

